# Chapter 3: Processes

## Objectives
- Introduce the notion of a **process** (program in execution, basis of computation).
- Describe features: scheduling, creation/termination, communication.
- Explore **interprocess communication (IPC)**: shared memory, message passing.
- Understand communication in **client-server systems**.

---

## Process Concept
- **Program** = passive entity stored on disk (executable file).
- **Process** = active, program in execution.
- Components of a process:
  - **Text section** – program code.
  - **Program counter & registers** – current activity.
  - **Stack** – temporary data (parameters, return addresses, local variables).
  - **Data section** – global variables.
  - **Heap** – memory dynamically allocated at runtime.
- One program can be multiple processes (e.g., multiple users executing the same program).

---

## Process State
- **New** – being created.
- **Running** – instructions executing.
- **Waiting** – waiting for some event.
- **Ready** – waiting to be assigned to CPU.
- **Terminated** – finished execution.

---

## Process Control Block (PCB)
Holds info for each process:
- State, program counter, CPU registers.
- Scheduling info (priority, queue pointers).
- Memory-management info (allocated memory).
- Accounting info (CPU time used, elapsed time).
- I/O status (devices, open files).

---

## Context Switch
- CPU switches from one process to another.
- Old process state saved in PCB, new state loaded.
- **Overhead**: no useful work during switch.
- Time depends on OS complexity & hardware support.

---

## Threads
- Process can have **multiple threads of execution**.
- Multiple program counters within a process.
- Require extra storage in PCB.

---

## Process Scheduling
- Goal: maximize CPU use, enable time sharing.
- **Queues**:
  - **Job queue** – all system processes.
  - **Ready queue** – processes in memory, ready to run.
  - **Device queues** – processes waiting for I/O.
- Processes migrate among queues.

---

## Types of Schedulers
- **Short-term (CPU) scheduler**: picks process for CPU, runs often (ms).
- **Long-term (job) scheduler**: decides which jobs enter ready queue, runs less often (sec/min).
  - Controls degree of multiprogramming.
  - Balances I/O-bound vs CPU-bound jobs.
- **Medium-term scheduler**: suspends/resumes processes (swapping).

---

## Operations on Processes
### Creation
- Parent creates children → forms a tree.
- Options:
  - Share all, some, or no resources with parent.
  - Run concurrently or wait for child termination.
- **UNIX**: `fork()` + `exec()`.  
- **Windows**: `CreateProcess()`.

### Termination
- Process ends with `exit()`, resources deallocated.
- Parent can terminate child with `abort()`.
- **Cascading termination**: if parent dies, children also killed.
- Issues:
  - **Zombie** – child ended, parent hasn’t waited.
  - **Orphan** – parent died before child.

---

## Interprocess Communication (IPC)
- Processes may be **independent** or **cooperating**.
- Reasons for cooperation: info sharing, speedup, modularity, convenience.
- Two IPC models:
  1. **Shared memory** – fast, needs synchronization.
  2. **Message passing** – explicit send/receive.

### Producer-Consumer Problem
- Producer generates data, consumer uses it.
- **Bounded buffer**: fixed size buffer, requires synchronization.
- **Unbounded buffer**: unlimited size.

---

## Message Passing
- Processes exchange messages via links.
- **Direct communication**: processes name each other.
- **Indirect communication**: use mailboxes (ports).
- Synchronization:
  - **Blocking (synchronous)** – sender/receiver wait.
  - **Non-blocking (asynchronous)** – continue immediately.
- **Buffering**:
  - Zero capacity – rendezvous.
  - Bounded capacity – finite queue.
  - Unbounded capacity – infinite queue.

---

## IPC Examples
- **POSIX**: shared memory (`shm_open`, `ftruncate`, `mmap`).
- **Mach**: message-based (`msg_send`, `msg_receive`, `msg_rpc`).
- **Windows**: Local Procedure Calls (LPC) via ports.

---

## Client-Server Communication
- **Sockets**: endpoints defined by IP + port.
- **Remote Procedure Calls (RPC)**:
  - Uses stubs (client/server proxies).
  - Handles data representation (endianness).
  - OS provides rendezvous service.
- **Pipes**:
  - **Ordinary**: parent-child, unidirectional.
  - **Named**: more powerful, bidirectional, no parent-child needed.

---
